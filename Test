<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Question Answer Checker</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        #questions { width: 100%; height: 150px; }
        #result { margin-top: 15px; color: red; }
    </style>
</head>
<body>

    <h2>Question Answer Checker</h2>
    <p>Paste your questions below:</p>
    <textarea id="questions" placeholder="Paste questions here..."></textarea><br>
    <button onclick="checkQuestions()">Check Now</button>

    <div id="result"></div>

    <script>
        function checkQuestions() {
            const textarea = document.getElementById("questions").value;
            const resultDiv = document.getElementById("result");
            resultDiv.innerHTML = "";  // Clear previous result

            // Split the input into lines
            const lines = textarea.split('\n');
            let missingAnswers = [];
            let questionIndex = 1; // Tracks the question number to display
            let questionStarted = false; // Track if a question has started
            let answerFound = false; // Track if an answer is found for the current question

            // Loop through each line to check if each question has an answer
            for (let i = 0; i < lines.length; i++) {
                const trimmedLine = lines[i].trim(); // Trim whitespace from the line

                // Check for questions formatted like "1.", "2a.", etc.
                if (/^\d+[a-zA-Z]?\.\s.*?:/.test(trimmedLine)) {
                    const parts = trimmedLine.split(':');
                    const currentAnswer = parts[1]?.trim() || ''; // Get answer from current line

                    // Check if the next lines contain an answer
                    answerFound = currentAnswer.length > 0;

                    // Look ahead to find an answer on the next non-empty line
                    for (let j = i + 1; j < lines.length; j++) {
                        const nextLine = lines[j].trim();
                        if (nextLine !== '') { // Stop looking at blank lines
                            answerFound = answerFound || nextLine.length > 0; // Combine answer findings
                            break; // Break after finding the first non-empty line
                        }
                    }

                    // If no answer is found, add the questionIndex to missingAnswers
                    if (!answerFound) {
                        missingAnswers.push(questionIndex);
                    }

                    questionIndex++; // Increment the question index for the next question
                    questionStarted = true; // Mark that a question has started
                } else if (questionStarted && trimmedLine === '') {
                    // If a question was started, and we find a blank line, we need to reset the flag
                    questionStarted = false;
                }
            }

            // Display results
            if (missingAnswers.length > 0) {
                resultDiv.innerHTML = "Unanswered questions: " + missingAnswers.join(', ');
            } else {
                resultDiv.innerHTML = "All questions are answered!";
            }
        }
    </script>

</body>
</html>
